import{c as y,e as p,j as e,r as c,f as R,d as w,_ as N,u as T,L as S,S as I}from"./index-dFe5MJd9.js";import{T as M}from"./trash-D0ZYhgEN.js";import{P as q}from"./ProductCard-CZ61ExWf.js";import{m as i}from"./motion-CokJUgQ3.js";import"./card-CDLzOY5x.js";import"./star-CWqlD-gT.js";/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=y("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.435.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),G=({item:s})=>{const{removeFromCart:t,updateQuantity:r}=p();return e.jsx("div",{className:"rounded-lg border p-4 shadow-sm border-gray-700 bg-five md:p-6",children:e.jsxs("div",{className:"space-y-4 md:flex md:items-center md:justify-between md:gap-6 md:space-y-0",children:[e.jsx("div",{className:"shrink-0 md:order-1",children:e.jsx("img",{className:"h-20 md:h-32 rounded object-cover",src:s.image})}),e.jsx("label",{className:"sr-only",children:"Choose quantity:"}),e.jsxs("div",{className:"flex items-center justify-between md:order-3 md:justify-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:`inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border
							 border-gray-600 bg-gray-700 hover:bg-gray-600 focus:outline-none focus:ring-2
							  focus:ring-emerald-500`,onClick:()=>r(s._id,s.quantity-1),children:e.jsx(U,{className:"text-gray-300"})}),e.jsx("p",{children:s.quantity}),e.jsx("button",{className:`inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border
							 border-gray-600 bg-gray-700 hover:bg-gray-600 focus:outline-none 
						focus:ring-2 focus:ring-emerald-500`,onClick:()=>r(s._id,s.quantity+1),children:e.jsx(F,{className:"text-gray-300"})})]}),e.jsx("div",{className:"text-end md:order-4 md:w-32",children:e.jsxs("p",{className:"text-base font-bold text-second",children:["$",s.price]})})]}),e.jsxs("div",{className:"w-full min-w-0 flex-1 space-y-4 md:order-2 md:max-w-md",children:[e.jsx("p",{className:"text-base font-medium text-white hover:text-emerald-400 hover:underline",children:s.name}),e.jsx("p",{className:"text-sm text-third	",children:s.description}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:`inline-flex items-center text-sm font-medium text-red-400
							 hover:text-red-300 hover:underline`,onClick:()=>t(s._id),children:e.jsx(M,{})})})]})]})})},H=()=>{const[s,t]=c.useState([]),[r,n]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const o=await w.get("/products/recommendations");t(o.data)}catch(o){N.error(o.response.data.message||"An error occurred while fetching recommendations")}finally{n(!1)}})()},[]),r?e.jsx(R,{}):e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-2xl font-semibold text-emerald-400",children:"People also bought"}),e.jsx("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg: grid-col-3",children:s.map(a=>e.jsx(q,{product:a},a._id))})]})};var C="https://js.stripe.com/v3",O=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,v="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",X=function(){for(var t=document.querySelectorAll('script[src^="'.concat(C,'"]')),r=0;r<t.length;r++){var n=t[r];if(O.test(n.src))return n}return null},b=function(t){var r="",n=document.createElement("script");n.src="".concat(C).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},$=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:r})},d=null,u=null,x=null,B=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},J=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},W=function(t){return d!==null?d:(d=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&t&&console.warn(v),window.Stripe){r(window.Stripe);return}try{var a=X();if(a&&t)console.warn(v);else if(!a)a=b(t);else if(a&&x!==null&&u!==null){var o;a.removeEventListener("load",x),a.removeEventListener("error",u),(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=b(t)}x=J(r,n),u=B(n),a.addEventListener("load",x),a.addEventListener("error",u)}catch(l){n(l);return}}),d.catch(function(r){return d=null,Promise.reject(r)}))},D=function(t,r,n){if(t===null)return null;var a=t.apply(void 0,r);return $(a,n),a},m,E=!1,P=function(){return m||(m=W(null).catch(function(t){return m=null,Promise.reject(t)}),m)};Promise.resolve().then(function(){return P()}).catch(function(s){E||console.warn(s)});var Q=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];E=!0;var a=Date.now();return P().then(function(o){return D(o,r,a)})};const z=Q("pk_test_51RXKTgIOJgLIP5GBURcPEJUMdJTAGX7fNXJkzcaGoc5LfspFsAgtOfQ9Hj5wudBXU6ubQ61A1Ft5DaGqH3A0auUe00yERqU3Fe"),V=()=>{const{user:s}=T(),{total:t,subtotal:r,coupon:n,isCouponApplied:a,cart:o}=p(),l=r-t,h=r.toFixed(2),f=t.toFixed(2),g=l.toFixed(2),L=async()=>{if(!(s!=null&&s.address)){N("please add address");return}const k=await z,A=(await w.post("/payments/create-checkout-session",{products:o,couponCode:n?n.code:null})).data,j=await k.redirectToCheckout({sessionId:A.id});j.error&&console.error("Error:",j.error)};return e.jsxs(i.div,{className:"space-y-4 rounded-lg border border-gray-700 bg-five p-4 shadow-sm sm:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("p",{className:"text-xl font-semibold text-second",children:"Order summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("dl",{className:"flex items-center justify-between gap-4",children:[e.jsx("dt",{className:"text-base font-normal text-gray-300",children:"Original price"}),e.jsxs("dd",{className:"text-base font-medium text-white",children:["$",h]})]}),l>0&&e.jsxs("dl",{className:"flex items-center justify-between gap-4",children:[e.jsx("dt",{className:"text-base font-normal text-gray-300",children:"Savings"}),e.jsxs("dd",{className:"text-base font-medium text-emerald-400",children:["-$",g]})]}),n&&a&&e.jsxs("dl",{className:"flex items-center justify-between gap-4",children:[e.jsxs("dt",{className:"text-base font-normal text-gray-300",children:["Coupon (",n.code,")"]}),e.jsxs("dd",{className:"text-base font-medium text-emerald-400",children:["-",n.discountPercentage,"%"]})]}),e.jsxs("dl",{className:"flex items-center justify-between gap-4 border-t border-gray-600 pt-2",children:[e.jsx("dt",{className:"text-base font-bold text-white",children:"Total"}),e.jsxs("dd",{className:"text-base font-bold text-second",children:["$",f]})]})]}),e.jsx(i.button,{className:"flex w-full items-center justify-center rounded-lg bg-fourth px-5 py-2.5 text-sm font-medium text-white hover:bg-fourth focus:outline-none focus:ring-4 focus:ring-emerald-300",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:L,children:"Proceed to Checkout"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"or"}),e.jsxs(S,{to:"/",className:"inline-flex items-center gap-2 text-sm font-medium text-second underline hover:text-third hover:no-underline",children:["Continue Shopping",e.jsx(_,{size:16})]})]})]})]})},Y=()=>{const[s,t]=c.useState(""),{coupon:r,isCouponApplied:n,applyCoupon:a,getMyCoupon:o,removeCoupon:l}=p();c.useEffect(()=>{o()},[o]),c.useEffect(()=>{r&&t(r.code)},[r]);const h=()=>{s&&a(s)},f=async()=>{await l(),t("")};return e.jsxs(i.div,{className:"space-y-4 rounded-lg border border-gray-700 bg-five p-4 shadow-sm sm:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"voucher",className:"mb-2 block text-sm font-medium text-second",children:"Do you have a voucher or gift card?"}),e.jsx("input",{type:"text",id:"voucher",className:`block w-full rounded-lg border border-gray-600 bg-gray-700 
            p-2.5 text-sm text-white placeholder-gray-400 focus:border-emerald-500 
            focus:ring-emerald-500`,placeholder:"Enter code here",value:s,onChange:g=>t(g.target.value),required:!0})]}),e.jsx(i.button,{type:"button",className:"flex w-full items-center justify-center rounded-lg bg-fourth px-5 py-2.5 text-sm font-medium text-white  focus:outline-none focus:ring-4 focus:ring-emerald-300",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,children:"Apply Code"})]}),n&&r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Applied Coupon"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-400",children:[r.code," - ",r.discountPercentage,"% off"]}),e.jsx(i.button,{type:"button",className:`mt-2 flex w-full items-center justify-center rounded-lg bg-red-600 
            px-5 py-2.5 text-sm font-medium text-white hover:bg-red-700 focus:outline-none
             focus:ring-4 focus:ring-red-300`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,children:"Remove Coupon"})]}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Your Available Coupon:"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-400",children:[r.code," - ",r.discountPercentage,"% off"]})]})]})},oe=()=>{const{cart:s}=p();return e.jsx("div",{className:"py-8 md:py-16",children:e.jsx("div",{className:"mx-auto max-w-screen-xl px-4 2xl:px-0",children:e.jsxs("div",{className:"mt-6 sm:mt-8 md:gap-6 lg:flex lg:items-start xl:gap-8",children:[e.jsxs(i.div,{className:"mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[s.length===0?e.jsx(K,{}):e.jsx("div",{className:"space-y-6",children:s.map(t=>e.jsx(G,{item:t},t._id))}),s.length>0&&e.jsx(H,{})]}),s.length>0&&e.jsxs(i.div,{className:"mx-auto mt-6 max-w-4xl flex-1 space-y-6 lg:mt-0 lg:w-full",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[e.jsx(V,{}),e.jsx(Y,{})]})]})})})},K=()=>e.jsxs(i.div,{className:"flex flex-col items-center justify-center space-y-4 py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(I,{className:"h-24 w-24 text-gray-300"}),e.jsx("h3",{className:"text-2xl font-semibold ",children:"Your cart is empty"}),e.jsxs("p",{className:"text-gray-400",children:["Looks like you ","haven't"," added anything to your cart yet."]}),e.jsx(S,{className:"mt-4 rounded-md bg-emerald-500 px-6 py-2 text-white transition-colors hover:bg-emerald-600",to:"/",children:"Start Shopping"})]});export{oe as default};
